name: enable-automerge-deanoc

on:
  pull_request_target:
    types:
      - opened
      - reopened
      - synchronize
      - ready_for_review
  issue_comment:
    types:
      - created
      - edited

permissions:
  contents: read
  pull-requests: read

jobs:
  enable-automerge:
    if: ${{ github.event_name != 'issue_comment' || github.event.issue.pull_request != null }}
    runs-on: ubuntu-latest
    steps:
      - name: Manual merge only
        run: |
          echo "Auto-merge is disabled by policy."
          echo "Use manual merge after applying review policy:"
          echo "https://github.com/DeanoC/ZiggySpiderweb/blob/main/docs/review-policy.md"
